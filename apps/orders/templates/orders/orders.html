{% extends "root.html" %}
{% load static %}

{% block title %}My Orders{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto px-4 py-8">

  <!-- Page Header -->
   <div class="mb-8 flex items-center gap-3">
    <!-- Back Button -->
    <a
      href="{% url 'home' %}"
      class="inline-flex h-9 w-9 items-center justify-center rounded-full
            bg-slate-100 dark:bg-slate-700
            text-slate-600 dark:text-slate-300
            hover:bg-slate-200 dark:hover:bg-slate-600
            transition"
      aria-label="Back to home"
    >
      <!-- Arrow Left Icon -->
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-5 w-5"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        stroke-width="2"
      >
        <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
      </svg>
    </a>

    <!-- Title -->
    <div>
      <h1 class="text-2xl font-semibold text-slate-800 dark:text-slate-100">
        My Orders
        </h1>
        <p class="text-sm text-slate-500 dark:text-slate-400">
        View your recent purchases and order status
        </p>
    </div>
  </div>

    

  <!-- Orders List -->
  <div class="space-y-4">

    {% for order in orders %}
    <a
      href="{% url 'order_details' order.id %}"
      class="block rounded-xl bg-white dark:bg-slate-800 p-5 shadow-sm
             border border-slate-200 dark:border-slate-700
             hover:border-indigo-400 transition"
    >

      <!-- Order Header -->
      <div class="flex items-center justify-between mb-3">
        <div>
          <h2 class="font-semibold text-slate-800 dark:text-slate-100">
            Order #{{ order.id }}
          </h2>
          <p class="text-sm text-slate-500">
            Placed on {{ order.created_at|date:"M d, Y" }}
          </p>
        </div>

        <!-- Status Badge -->
        <span
          class="inline-flex items-center rounded-full px-3 py-1 text-sm font-medium
          {% if order.status == 'completed' %}
            bg-emerald-100 text-emerald-700
          {% elif order.status == 'pending' %}
            bg-yellow-100 text-yellow-700
          {% else %}
            bg-slate-200 text-slate-700
          {% endif %}
          "
        >
          {{ order.status|title }}
        </span>
      </div>

      <!-- Order Items Preview -->
      <div class="flex flex-wrap gap-2 mb-3">
        {% for item in order.items.all|slice:":3" %}
          <span
            class="text-sm rounded-full bg-slate-100 dark:bg-slate-700
                   px-3 py-1 text-slate-700 dark:text-slate-200"
          >
            {{ item.product.name }} Ã— {{ item.quantity }}
          </span>
        {% endfor %}

        {% if order.items.count > 3 %}
          <span class="text-sm text-slate-500">
            +{{ order.items.count|add:"-3" }} more
          </span>
        {% endif %}
      </div>

      <!-- Order Footer -->
      <div class="flex items-center justify-between text-sm">
        <span class="text-slate-500">
          {{ order.items.count }} item{{ order.items.count|pluralize }}
        </span>

        <span class="font-semibold text-slate-800 dark:text-slate-100">
          ${{ order.total_amount }}
        </span>
      </div>

    </a>
    {% empty %}
    <div class="text-center py-12">
      <p class="text-slate-500">You have no orders yet.</p>
    </div>
    {% endfor %}

  </div>

</div>
{% endblock %}
